let lastX,lastY,canvas,canvasCtx,mousePressed=!1,brushColor="#000",brushSize=5;function initCanvas(){(canvas=document.getElementById("myCanvas")).addEventListener("touchstart",(function(e){mousePressed=!0,console.log("%cMOUSE DOWN","background: #111; font-family:'Roboto Light'; font-weight: bold; color:white"),draw(e.pageX-$(this).offset().left,e.pageY-$(this).offset().top,!1)}),!1),canvas.addEventListener("touchend",(function(e){mousePressed=!1,console.log("%cMOUSE UP","background: #111; font-family:'Roboto Light'; font-weight: bold; color:white")}),!1),canvas.addEventListener("touchmove",(function(e){mousePressed&&draw(e.pageX-$(this).offset().left,e.pageY-$(this).offset().top,!0)}),!1),canvasCtx=canvas.getContext("2d"),canvas.width=window.innerWidth,canvas.height=window.innerHeight/1.22,window.onresize=e=>{980==window.innerWidth?(console.log("== 980"),canvas.width=window.innerWidth,canvas.height=window.innerHeight/2):(canvas.width=window.innerWidth,canvas.height=window.innerHeight/1.22)},$("#myCanvas").mousedown((function(e){mousePressed=!0,console.log("%cMOUSE DOWN","background: #111; font-family:'Roboto Light'; font-weight: bold; color:white"),draw(e.pageX-$(this).offset().left,e.pageY-$(this).offset().top,!1)})),$("#myCanvas").mousemove((function(e){mousePressed&&draw(e.pageX-$(this).offset().left,e.pageY-$(this).offset().top,!0)})),$("#myCanvas").mouseup((function(e){mousePressed=!1,console.log("%cMOUSE UP","background: #111; font-family:'Roboto Light'; font-weight: bold; color:white")})),$("#myCanvas").mouseleave((function(e){mousePressed=!1}));let e=document.getElementById("clearBtn");$("#clearBtn").on("mouseover",e=>{document.getElementById("my-clear-icon").classList.toggle("spin")}),$("#clearBtn").on("mouseout",e=>{document.getElementById("my-clear-icon").classList.toggle("spin")}),e.addEventListener("click",clearArea);let t=document.getElementById("downloadBtn");t.addEventListener("mouseover",e=>{document.getElementById("my-download-icon").classList.toggle("slide-down")}),t.addEventListener("mouseout",e=>{document.getElementById("my-download-icon").classList.toggle("slide-down")}),t.addEventListener("click",(function(e){console.log("%cSAVING","background: firebrick; font-family:'Roboto Light'; font-weight: bold; color:white"),t.href=canvas.toDataURL("image/png"),t.download="image.png"}),!1),$("#myRange").on("change",e=>{document.getElementById("brushSize").innerHTML=e.target.value})}function draw(e,t,o){o&&(canvasCtx.strokeStyle=brushColor,canvasCtx.lineWidth=$("#myRange").val(),canvasCtx.lineJoin="round",canvasCtx.beginPath(),canvasCtx.moveTo(lastX,lastY),canvasCtx.lineTo(e,t),console.info(`%c ${lastX}, ${lastY} %c=>%c ${e}, ${t} `,"background: #transparent; color: white; font-family:'Roboto Light'; font-weight: bold","background: #transparent; color: rgba(255, 60, 10, 1); font-family:inherit; font-weight: bold","background: #transparent; color: white; font-family:'Roboto Light'; font-weight: bold"),canvasCtx.closePath(),canvasCtx.stroke()),lastX=e,lastY=t}function clearArea(){canvasCtx.setTransform(1,0,0,1,0,0),canvasCtx.clearRect(0,0,canvasCtx.canvas.width,canvasCtx.canvas.height)}function pickColor(e,t){brushColor=e;let o=document.getElementsByClassName("color");$.each(o,(e,o)=>{o.id===t.id?document.getElementById(o.id).classList.add("color--picked"):document.getElementById(o.id).classList.remove("color--picked")})}